<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Frey 的个人网站</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css">

    <!-- 终极完美配色方案：三套主题完全独立又统一 -->
    <style>
        :root {
            /* 夜间模式（默认最美） */
            --text: #e2e8f0;
            --text-muted: #94a3b8;
            --text-light: #cbd5e1;
            --border: rgba(255,255,255,0.12);
            --card-bg: rgba(255,255,255,0.045);
            --btn-bg: rgba(255,255,255,0.04);
            --log-bg: rgba(0,0,0,0.28);
            --accent: #60a5fa;
            --panel-bg: rgba(15,23,42,0.65);
        }

        /* 日间模式 & 自动白天 - 清新蓝天飞鸟风 */
        .theme-day,
        .theme-auto-bright {
            --text: #1e293b;
            --text-muted: #475569;
            --text-light: #64748b;
            --border: rgba(0,0,0,0.12);
            --card-bg: rgba(255,255,255,0.78);
            --btn-bg: rgba(255,255,255,0.85);
            --log-bg: rgba(241,245,249,0.85);
            --accent: #2563eb;
            --panel-bg: rgba(255,255,255,0.90);
        }

        /* 自动模式夜间 - 更梦幻的星空感 */
        .theme-auto-dark {
            --text: #cbd5e1;
            --text-muted: #94a3b8;
            --text-light: #e2e8f0;
            --border: rgba(100,116,139,0.22);
            --card-bg: rgba(15,23,42,0.38);
            --btn-bg: rgba(30,41,59,0.42);
            --log-bg: rgba(0,0,0,0.35);
            --accent: #7dd3fc;
            --panel-bg: rgba(15,23,42,0.72);
        }

        /* 浮动面板统一毛玻璃 */
        #bg-switcher-panel,
        #net-monitor-panel,
        #music-player-panel {
            background: var(--panel-bg) !important;
            border: 1px solid var(--border);
            backdrop-filter: blur(16px);
        }

        /* 白天按钮加点阴影更立体 */
        .theme-day .btn,
        .theme-auto-bright .btn {
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }
        .theme-day .btn:hover,
        .theme-auto-bright .btn:hover {
            box-shadow: 0 8px 20px rgba(37,99,235,0.25);
        }
    </style>
</head>
<body>

<div id="vanta-bg"></div>

<div id="time-card"><div class="date">0000-00-00</div><div class="time">--:--:--</div></div>

<header><h1>Frey 的个人网站</h1><p>记录 · 思考 · 成长 · 前进</p></header>

<div class="container">
    <!-- 图片压缩&格式转换 -->
    <div class="post-card">
        <h2 class="card-title">图片压缩&格式转换 <span class="toggle-icon">down</span></h2>
        <div class="card-content">
            <p style="margin-top:8px">在浏览器内压缩图片并转换格式：上传 → 设置参数 → 压缩 → 单张或打包下载。</p>
            <div style="margin-top:12px" class="compress-grid">
                <div style="padding:12px">
                    <div id="dropzone" class="dropzone">
                        <div style="font-weight:600;color:#cfe8ff">拖拽图片到这里，或点击选择文件（支持多选）</div>
                        <div class="small" style="margin-top:6px">支持 JPEG / PNG / WebP / AVIF / GIF（静帧）以及几乎所有浏览器可打开的图片格式</div>
                        <input id="fileInput" type="file" accept="image/*" multiple style="display:none">
                    </div>
                    <div class="thumbs" id="thumbs"></div>
                    <div style="margin-top:12px" class="file-row">
                        <div class="small">已选：<span id="count">0</span> 张</div>
                        <div>
                            <button class="btn" id="clearBtn">清空页面</button>
                            <button class="btn" id="compressBtn">开始处理</button>
                            <button class="btn" id="downloadAllBtn">打包下载</button>
                        </div>
                    </div>
                    <div style="margin-top:8px" class="small">
                        处理日志：<div id="log"></div>
                    </div>
                </div>
                <div class="controls post-card" style="padding:14px">
                    <h3 style="margin:0 0 8px;color:#93c5fd">参数设置</h3>
                    <div class="compress-param"><label class="small">最大宽度或高度（像素）</label><input id="maxSide" type="number" value="1024" min="64" step="1"></div>
                    <div class="compress-param"><label class="small">目标文件大小（最大，MB）</label><input id="maxSizeMB" type="number" value="1" min="0.05" step="0.05"></div>
                    <div>
                        <label class="small">输出格式</label>
                        <select id="outFormat">
                            <option value="original">保持原格式</option>
                            <option value="jpeg">JPEG (.jpg)</option>
                            <option value="png">PNG (.png)</option>
                            <option value="webp" selected>WebP (.webp)</option>
                            <option value="avif">AVIF (.avif)</option>
                        </select>
                    </div>
                    <div class="compress-param">
                        <label class="small">质量 (0.1 - 1.0) <span id="qualityVal" class="small" style="float:right">0.80</span></label>
                        <input id="quality" type="range" min="0.1" max="1" step="0.05" value="0.80">
                    </div>
                    <div class="compress-param"><label class="small"><input id="useWorker" type="checkbox" checked> 使用 Web Worker（更快，推荐）</label></div>
                    <div><label class="small"><input type="checkbox" id="onlyConvert"> 仅修改图片格式（不压缩）</label></div>
                    <div style="margin-top:8px" class="small">
                        提示：勾选「仅修改图片格式」后将无损转换格式，压缩相关参数会变灰。<br>AVIF 压缩率最高，WebP 兼容性最佳。
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 图片 ↔ PDF 互转 -->
    <div class="post-card">
        <h2 class="card-title">图片 ↔ PDF 互转 <span class="toggle-icon">down</span></h2>
        <div class="card-content">
            <p style="margin-top:8px">纯前端实现：多图转 PDF、PDF 转图片，全部离线处理，支持拖拽与批量下载。</p>
            <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
                <button class="btn active" data-tab="img2pdf">图片 → PDF</button>
                <button class="btn" data-tab="pdf2img">PDF → 图片</button>
            </div>
            <div id="img2pdf" class="compress-grid" style="margin-top:12px;gap:18px">
                <div style="padding:12px">
                    <div id="dropzoneImg" class="dropzone">
                        <div style="font-weight:600;color:#cfe8ff">拖拽图片到这里，或点击选择（支持多选）</div>
                        <div class="small" style="margin-top:6px">支持 JPG / PNG / WebP / GIF（静帧）</div>
                        <input type="file" id="imgInput" accept="image/*" multiple style="display:none">
                    </div>
                    <div class="thumbs" id="imgThumbs"></div>
                    <div class="file-row" style="margin-top:12px">
                        <div class="small">已选：<span id="imgCount">0</span> 张</div>
                        <div>
                            <button class="btn" id="clearImgList">清空列表</button>
                            <button class="btn" id="generatePdf">生成 PDF</button>
                        </div>
                    </div>
                    <div class="small" style="margin-top:8px">处理日志：<div id="imgLog"></div></div>
                </div>
                <div class="controls post-card" style="padding:14px;height:fit-content">
                    <h3 style="margin:0 0 8px;color:#93c5fd">参数设置</h3>
                    <div class="compress-param"><label class="small">页面尺寸</label>
                        <select id="pageSize">
                            <option value="a4">A4（竖版）</option>
                            <option value="a4l">A4（横版）</option>
                            <option value="letter">Letter</option>
                            <option value="custom">自定义尺寸</option>
                        </select>
                    </div>
                    <div class="compress-param" id="customSizeRow" style="display:none">
                        <input type="number" id="customW" placeholder="宽 px" value="1920" style="width:48%">
                        <input type="number" id="customH" placeholder="高 px" value="1080" style="width:48%;margin-left:4%">
                    </div>
                    <div class="compress-param"><label class="small">边距（px）</label><input id="margin" type="number" value="20" min="0"></div>
                </div>
            </div>
            <div id="pdf2img" style="display:none;padding:12px">
                <div id="dropzonePdf" class="dropzone">
                    <div style="font-weight:600;color:#cfe8ff">拖拽 PDF 文件到这里，或点击选择</div>
                    <div class="small" style="margin-top:6px">一次只支持单个 PDF</div>
                    <input type="file" id="pdfInput" accept=".pdf" style="display:none">
                </div>
                <div class="thumbs" id="pdfThumbs"></div>
                <div class="file-row" style="margin-top:12px">
                    <div class="small">共 <span id="pdfPageCount">0</span> 页</div>
                    <div>
                        <button class="btn" id="clearPdfList">清空页面</button>
                        <button class="btn" id="extractImages">提取图片</button>
                        <button class="btn" id="downloadAllImages">打包下载</button>
                    </div>
                </div>
                <div class="small" style="margin-top:8px">处理日志：<div id="pdfLog"></div></div>
            </div>
        </div>
    </div>

    <!-- 未来内容 -->
    <div class="post-card">
        <h2 class="card-title">未来内容 <span class="toggle-icon">down</span></h2>
        <div class="card-content"><p>敬请期待！</p></div>
    </div>
</div>

<footer>© 2025 <span>Frey</span> • Powered by GitHub Pages</footer>

<!-- 背景切换按钮 -->
<div id="bg-switcher-btn"><div class="bg-icon">sparkles</div></div>
<div id="bg-switcher-panel">
    <h3>动态背景模式</h3>
    <div class="bg-options">
        <button data-mode="night" class="bg-opt active">夜间 · NET网格</button>
        <button data-mode="day"   class="bg-opt">日间 · BIRDS飞鸟</button>
        <button data-mode="auto"  class="bg-opt">自动 · 云天变幻</button>
    </div>
</div>

<!-- 网络监控、音乐播放器等保持不变 -->
<div id="net-monitor-btn"><div class="net-icon">globe</div></div>
<div id="net-monitor-panel">/* 内容不变 */</div>
<div id="music-player-btn"><div class="music-icon">music</div></div>
<div id="music-player-panel">/* 内容不变 */</div>

<!-- 第三方库 -->
<script src="js/lib/three.min.js"></script>
<script src="js/lib/vanta.net.min.js"></script>
<script src="js/lib/vanta.birds.min.js"></script>
<script src="js/lib/vanta.clouds.min.js"></script>
<script src="js/lib/browser-image-compression.min.js"></script>
<script src="js/lib/jszip.min.js"></script>
<script src="js/lib/jspdf.umd.min.js"></script>
<script src="js/lib/pdf.min.js"></script>

<script>window.VANTA = window.VANTA || {}; Object.assign(window.VANTA, window.VANTA || {});</script>
<script type="module" src="js/main.js"></script>
<script type="module" src="js/modules/vanta-bg.js"></script>

<!-- 内联脚本（Tab + 日志样式）保持不变 -->
<script>
// Tab 切换 + 自定义尺寸显隐 + 日志样式（原代码完全保留）
document.querySelectorAll('[data-tab]').forEach(b => b.onclick = () => {
    document.querySelectorAll('[data-tab]').forEach(x => x.classList.remove('active'));
    document.querySelectorAll('#img2pdf, #pdf2img').forEach(x => x.style.display = 'none');
    b.classList.add('active');
    document.getElementById(b.dataset.tab).style.display = b.dataset.tab === 'img2pdf' ? 'grid' : 'block';
});
document.getElementById('pageSize').onchange = e => {
    document.getElementById('customSizeRow').style.display = e.target.value === 'custom' ? 'block' : 'none';
};
const style = document.createElement('style');
style.textContent = `#imgLog,#pdfLog{margin-top:6px;color:var(--text-muted);font-size:13px;max-height:160px;overflow:auto;padding:10px 12px;border-radius:8px;background:var(--log-bg);border:1px solid var(--border);line-height:1.5;scrollbar-width:thin}
#imgLog::-webkit-scrollbar,#pdfLog::-webkit-scrollbar{width:8px;background:transparent}
#imgLog::-webkit-scrollbar-thumb,#pdfLog::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.15);border-radius:4px}
#imgLog::-webkit-scrollbar-thumb:hover,#pdfLog::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.3)}`;
document.head.appendChild(style);
</script>
</body>
</html>
