<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Frey 的个人网站</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css">

    <style>
        /* 通用参数行：标题 + 控件 对齐 */
        .compress-param {
            margin: 10px 0;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .compress-param label.small {
            font-size: 13px;
            color: var(--text-muted);
        }
        .compress-param input[type="text"],
        .compress-param input[type="password"],
        .compress-param input[type="number"],
        .compress-param select,
        .compress-param textarea {
            width: 100%;
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: rgba(255,255,255,0.03);
            color: var(--text);
            font-size: 14px;
            box-sizing: border-box;
        }
        .compress-param input[type="range"] {
            width: 100%;
        }
        /* 显示为和其它卡片一致的按钮样式（若外部 style.css 已有则使用外部样式） */
        .post-card .params-title { margin-top: 0; margin-bottom: 8px; font-size: 15px; color: var(--accent); }
        /* 日志块小调整 */
        #encLog, #decLog { min-height: 36px; max-height:160px; overflow:auto; padding:10px; border-radius:8px; background: rgba(0,0,0,0.03); color:var(--text-muted); }
        /* 载体预览 */
        #carrierPreview img { display:block; margin:6px auto; max-height:140px; width:auto; border-radius:6px; }
        /* 控制面板内一致的内边距 */
        #encrypt-panel .post-card, #decrypt-panel .post-card { padding:12px; box-sizing:border-box; }
        /* 修复狗叫密语输出区域的换行和滚动条问题 */
        #dogDecodeLog, #dogOutputLog {
            /* 确保内容超出时出现垂直滚动条 */
            overflow-y: auto !important; 
            /* 强制在任何字符处打断长单词，确保不会横向溢出 */
            word-break: break-all !important; 
            /* 确保日志框有足够的最小高度 */
            min-height: 100px !important;
        }
    </style>
</head>
<body>

<div id="vanta-bg"></div>

<div id="time-btn">🕓</div> <div id="time-panel">
    <h3>北京时间</h3>
    <div class="time-detail-item">日期：<span id="tp-date">--</span></div>
    <div class="time-detail-item">星期：<span id="tp-week">--</span></div>
    <div class="time-detail-item">时刻：<span id="tp-time">--</span></div>
</div>

<div id="guestbook-btn"><div class="guestbook-icon">💬</div></div>

<div id="guestbook-panel">
    <h3 class="panel-title">访客留言板</h3>
    
    <div id="guestbook-form">
        <label for="panel-guestbook-name" class="small">您的昵称 (可选)</label>
        <input type="text" id="panel-guestbook-name" placeholder="Frey 的热心网友" maxlength="30">
        
        <label for="panel-guestbook-content" class="small">留言内容 (必填)</label>
        <textarea id="panel-guestbook-content" placeholder="在这里留下您宝贵的建议或友好的问候..." maxlength="500" rows="5"></textarea>
        
        <button id="panel-submit-message" class="btn" style="width:100%;">提交留言</button>
        <div id="panel-message-log" class="small" style="text-align:center;margin-top:10px;"></div>
    </div>
    
    <div style="margin-top: 15px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.1);">
        <h4 style="color: var(--accent); font-size: 15px; margin: 0 0 10px 0;">近期留言</h4>
        <div id="panel-messages-list" style="max-height: 250px; overflow-y: auto;">
            <p class="small" style="text-align:center;">正在加载留言...</p>
        </div>
    </div>
</div>

<header>
    <h1>Frey 的个人网站</h1>
    <p>记录 · 思考 · 成长 · 前进</p>
</header>

<div class="container">
    <div class="post-card">
        <h2 class="card-title">🚃 图片压缩&格式转换 <span class="toggle-icon">▾</span></h2>
        <div class="card-content">
            <p style="margin-top:8px">在浏览器内压缩图片并转换格式：上传 → 设置参数 → 压缩 → 单张或打包下载。</p>
            <div style="margin-top:12px" class="compress-grid">
                <div style="padding:12px">
                    <div id="dropzone" class="dropzone">
                        <div class="dropzone-title">上传本地图片(拖拽/点击)</div>
                        <div class="small" style="margin-top:6px">支持 JPEG / PNG / WebP / AVIF / GIF（静帧）以及几乎所有浏览器可打开的图片格式</div>
                        <input id="fileInput" type="file" accept="image/*" multiple style="display:none">
                    </div>
                    <div class="thumbs" id="thumbs"></div>
                    <div style="margin-top:12px" class="file-row">
                        <div class="small">已选：<span id="count">0</span> 张</div>
                        <div>
                            <button class="btn" id="clearBtn">清空页面</button>
                            <button class="btn" id="compressBtn">开始处理</button>
                            <button class="btn" id="downloadAllBtn">打包下载</button>
                        </div>
                    </div>
                    <div style="margin-top:8px" class="small">
                        处理日志：<div id="log"></div>
                    </div>
                </div>
                <div class="controls post-card" style="padding:14px">
                    <h3 class="params-title">参数设置</h3>
                    <div class="compress-param"><label class="small">最大宽度或高度（像素）</label><input id="maxSide" type="number" value="1024" min="64" step="1"></div>
                    <div class="compress-param"><label class="small">目标文件大小（最大，MB）</label><input id="maxSizeMB" type="number" value="1" min="0.05" step="0.05"></div>
                    <div>
                        <label class="small">输出格式</label>
                        <select id="outFormat">
                            <option value="original">保持原格式</option>
                            <option value="jpeg">JPEG (.jpg)</option>
                            <option value="png">PNG (.png)</option>
                            <option value="webp" selected>WebP (.webp)</option>
                            <option value="avif">AVIF (.avif)</option>
                        </select>
                    </div>
                    <div class="compress-param">
                        <label class="small">质量 (0.1 - 1.0) <span id="qualityVal" class="small" style="float:right">0.80</span></label>
                        <input id="quality" type="range" min="0.1" max="1" step="0.05" value="0.80">
                    </div>
                    <div class="compress-param"><label class="small"><input id="useWorker" type="checkbox" checked> 使用 Web Worker（更快，推荐）</label></div>
                    <div><label class="small"><input type="checkbox" id="onlyConvert"> 仅修改图片格式（不压缩）</label></div>
                    <div style="margin-top:8px" class="small">
                        提示：勾选「仅修改图片格式」后将无损转换格式，压缩相关参数会变灰。<br>AVIF 压缩率最高，WebP 兼容性最佳。
                    </div>
                </div>
            </div>
        </div>
    </div>
    
<div class="post-card">
    <h2 class="card-title">🛡️文件加密与伪装 <span class="toggle-icon">▾</span></h2>
    <div class="card-content">
            <p style="margin-top:8px">使用AES技术进行文件加密，支持自选加密图。</p>
        <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn active" data-enc-tab="encrypt">加密文件</button>
            <button class="btn" data-enc-tab="decrypt">解密文件</button>
        </div>

<div id="encrypt-panel" style="display:block;margin-top:16px;">
    <div class="compress-grid">

        <div style="padding:12px">
            <div id="dropzoneEnc" class="dropzone" style="margin-bottom:15px;">
                <div class="dropzone-title">上传文件（任意格式）</div>
                <div class="small" style="margin-top:6px">仅支持单个文件</div>
                <input type="file" id="encInput" style="display:none">
            </div>

            <div class="small">处理日志：</div>
            <div id="encLog"></div>
        </div>

        <div class="controls post-card" style="padding:14px">
            <h3 class="params-title">参数设置</h3>

            <div class="compress-param">
                <label class="small">输出文件名（无需扩展名）</label>
                <input id="encFilename" type="text" placeholder="例如：secret_file">
            </div>

            <div class="compress-param">
                <label class="small">加密级别</label>
                <select id="encLevel">
                    <option value="level1">Level 1：文件伪装（改后缀可恢复）</option>
                    <option value="level2" selected>Level 2：AES-GCM-256 强加密</option>
                </select>
            </div>

            <div class="compress-param">
                <label class="small">加密密码（Level 2 必填）</label>
                <input id="encPasswordInput" type="password" placeholder="请输入密码">
            </div>

            <div class="compress-param">
                <label class="small">选择图片载体</label>

                <div id="localCarrierDropzone" class="dropzone" style="margin-bottom:10px;">
                    <div class="dropzone-title">上传本地图片（拖拽或点击）</div>
                    <input type="file" id="localCarrierInput" accept="image/*" style="display:none">
                </div>

                <select id="carrierImage">
                    <option value="" disabled selected>载体列表加载中...</option>
                </select>
            </div>

            <div class="compress-param">
                <label class="small">Salt（Base64）</label>
                <input id="encSaltDisplay" type="text" readonly placeholder="加密后显示">
            </div>

            <button class="btn" id="startEncrypt" style="width:100%;margin-top:10px;">开始加密</button>
        </div>

    </div>
</div>


        <div id="decrypt-panel" style="display:none;margin-top:16px;">

            <div id="dropzoneDec" class="dropzone" style="margin-bottom:15px;">
                <div class="dropzone-title">上传加密后的文件</div>
                <input type="file" id="decInput" style="display:none">
            </div>

            <div id="decFileDetail" style="margin-bottom:15px;padding:10px 0;border-bottom:1px solid var(--border);display:none;">
                <div class="small">文件名：<span id="decFileName">--</span></div>
                <div class="small">大小：<span id="decFileSize">--</span></div>
                <div class="small">加密级别：<span id="decLevelDisplay" style="color:var(--accent)">解析中...</span></div>
            </div>

            <div class="compress-param">
                <label class="small">解密密码（Level 2 必填）</label>
                <input id="decPasswordInput" type="password" placeholder="请输入密码">
            </div>

            <button class="btn" id="startDecrypt" style="width:100%;margin-top:10px;">开始解密</button>

            <div class="small" style="margin-top:10px;">处理日志：</div>
            <div id="decLog"></div>
        </div>

    </div>
</div>

<div class="post-card">
    <h2 class="card-title">🐾 兽语密文 <span class="toggle-icon">▾</span></h2>
    <div class="card-content">
        <p style="margin-top:8px">将普通文字转换成“兽语密文”，并使用密钥进行加密/解密。</p>
        
        <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn active" data-dog-tab="encode">转换为密文</button>
            <button class="btn" data-dog-tab="decode">还原为文字</button>
        </div>

        <div id="dog-encode-panel" style="display:block;margin-top:16px;">
            <div class="compress-grid">
            
                <div style="padding:12px">
                    <div class="compress-param" style="margin-top:0;">
                        <label class="small">输入普通文字：</label>
                        <textarea id="dogInputText" placeholder="在这里输入你想要转换为兽语密文的文字..." rows="5" style="resize:vertical;"></textarea>
                    </div>

                    <div class="compress-param">
                        <label class="small">生成的兽语密文：</label> <div id="dogOutputLog" class="log-box" style="min-height: 100px;">点击按钮开始转换...</div>
                    </div>

                    <div style="margin-top:8px" class="small">
                        处理日志：<div id="dogEncLog"></div>
                    </div>
                    
                    <div style="margin-top: 10px; display: flex; gap: 8px;">
                        <button class="btn" id="dogCopyBtn" style="flex: 1;">复制密文</button>
                        <button class="btn" id="dogDownloadTxtBtn" style="flex: 1;">下载为 TXT</button>
                    </div>
                </div>

                <div class="controls post-card" style="padding:14px;height:fit-content">
                    <h3 class="params-title">参数设置</h3>
                    
                    <div class="compress-param">
                        <label class="small">密钥 (用于扰乱替换规则)</label>
                        <input id="dogEncodeKey" type="text" placeholder="不能留空">
                    </div>

                    <button class="btn" id="dogEncodeBtn" style="width:100%;margin-top:10px;">开始转换</button>
                </div>

            </div>
        </div>
        
        <div id="dog-decode-panel" style="display:none;margin-top:16px;">
            <div class="compress-grid">
                <div style="padding:12px">
                    <div class="compress-param" style="margin-top:0;">
                        <label class="small">输入兽语密文：</label>
                        <textarea id="dogInputSpeak" placeholder="在这里粘贴你需要还原的兽语密文..." rows="5" style="resize:vertical;"></textarea>
                    </div>
                    
                    <div class="compress-param" style="margin-top: 10px;">
                        <label class="small">或从 TXT 文件读取密文：</label>
                        <div id="dogReadDropzone" class="dropzone" style="margin:0; padding:10px 12px;">
                            <div class="dropzone-title" style="font-size: 14px;">拖拽或点击上传 TXT 文件</div>
                            <input type="file" id="dogReadInput" accept=".txt" style="display:none">
                        </div>
                    </div>
                    
                    <div class="compress-param">
                        <label class="small">还原的普通文字：</label>
                        <div id="dogDecodeLog" class="log-box" style="min-height: 100px;">点击按钮开始还原...</div>
                    </div>

                    <div style="margin-top:8px" class="small">
                        处理日志：<div id="dogDecLog"></div>
                    </div>
                </div>

                <div class="controls post-card" style="padding:14px;height:fit-content">
                    <h3 class="params-title">还原参数</h3>
                    
                    <div class="compress-param">
                        <label class="small">密钥 (如果转换时使用了密钥，还原时必须使用)</label>
                        <input id="dogDecodeKey" type="text" placeholder="输入转换时使用的密钥">
                    </div>

                    <button class="btn" id="dogDecodeBtn" style="width:100%;margin-top:10px;">开始还原</button>
                </div>

            </div>
        </div>

    </div>
</div>
    
    <div class="post-card" id="pdf-convert-card">
        <h2 class="card-title">🚡 图片PDF 互转 <span class="toggle-icon">▾</span></h2>
        <div class="card-content">
            <p style="margin-top:8px">纯前端实现：多图转 PDF、PDF 转图片，全部离线处理，支持拖拽与批量下载。</p>
            <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
                <button class="btn active" data-tab="img2pdf">图片 → PDF</button>
                <button class="btn" data-tab="pdf2img">PDF → 图片</button>
            </div>
            <div id="img2pdf" class="compress-grid" style="margin-top:12px;gap:18px">
                <div style="padding:12px">
                    <div id="dropzoneImg" class="dropzone">
                        <div class="dropzone-title">上传本地图片(拖拽/点击)</div>
                        <div class="small" style="margin-top:6px">支持 JPG / PNG / WebP / GIF（静帧）</div>
                        <input type="file" id="imgInput" accept="image/*" multiple style="display:none">
                    </div>
                    <div class="thumbs" id="imgThumbs"></div>
                    <div class="file-row" style="margin-top:12px">
                        <div class="small">已选：<span id="imgCount">0</span> 张</div>
                        <div>
                            <button class="btn" id="clearImgList">清空列表</button>
                            <button class="btn" id="generatePdf">生成 PDF</button>
                        </div>
                    </div>
                    <div class="small" style="margin-top:8px">处理日志：<div id="imgLog"></div></div>
                </div>
                <div class="controls post-card" style="padding:14px;height:fit-content">
                    <h3 class="params-title">参数设置</h3>
                    <div class="compress-param"><label class="small">页面尺寸</label>
                        <select id="pageSize">
                            <option value="a4">A4（竖版）</option>
                            <option value="a4l">A4（横版）</option>
                            <option value="letter">Letter</option>
                            <option value="custom">自定义尺寸</option>
                        </select>
                    </div>
                    <div class="compress-param" id="customSizeRow" style="display:none">
                        <input type="number" id="customW" placeholder="宽 px" value="1920" style="width:48%">
                        <input type="number" id="customH" placeholder="高 px" value="1080" style="width:48%;margin-left:4%">
                    </div>
                    <div class="compress-param"><label class="small">边距（px）</label><input id="margin" type="number" value="20" min="0"></div>
                </div>
            </div>
            <div id="pdf2img" style="display:none;padding:12px">
                <div id="dropzonePdf" class="dropzone">
                    <div style="font-weight:600;">拖拽 PDF 文件到这里，或点击选择</div>
                    <div class="small" style="margin-top:6px">一次只支持单个 PDF</div>
                    <input type="file" id="pdfInput" accept=".pdf" style="display:none">
                </div>
                <div class="thumbs" id="pdfThumbs"></div>
                <div class="file-row" style="margin-top:12px">
                    <div class="small">共 <span id="pdfPageCount">0</span> 页</div>
                    <div>
                        <button class="btn" id="clearPdfList">清空页面</button>
                        <button class="btn" id="extractImages">提取图片</button>
                        <button class="btn" id="downloadAllImages">打包下载</button>
                    </div>
                </div>
                <div class="small" style="margin-top:8px">处理日志：<div id="pdfLog"></div></div>
            </div>
        </div>
    </div>

<div class="post-card">
    <h2 class="card-title">🖼️ 视觉幻影生成器 <span class="toggle-icon">▾</span></h2>
    <div class="card-content">
        <p style="margin-top:8px">制作一个在**白底**上看到图 A，在**黑底**上看到图 B 的 PNG 图像。</p>
        
        <div id="mirage-panel" style="display:block;margin-top:16px;">
            <div class="compress-grid">
                <div style="padding:12px">
                    <div class="compress-param" style="margin-top:0;">
                        <label class="small">⚪ 步骤一：白底预览图 (图 A)</label>
                        <div id="whiteFileDropzone" class="dropzone" style="margin-bottom:15px;">
                            <div class="dropzone-title">拖拽或点击上传图片</div>
                            <input type="file" id="whiteBgFile" accept="image/*" style="display:none">
                        </div>
                    </div>
                    
                    <div class="compress-param">
                        <label class="small">⚫ 步骤二：黑底隐藏图 (图 B)</label>
                        <div id="blackFileDropzone" class="dropzone">
                            <div class="dropzone-title">拖拽或点击上传图片</div>
                            <input type="file" id="blackBgFile" accept="image/*" style="display:none">
                        </div>
                    </div>
                    
                    <div id="mirage-result-preview" style="margin-top:15px; text-align: center; display: none;">
                        <h3 class="params-title" style="margin-bottom: 8px;">预览</h3>
                        <div id="miragePreview" style="max-width: 100%; max-height: 200px; margin-bottom: 10px; border: 1px dashed var(--border); display: inline-block; padding: 5px;">
                            <canvas id="miragePreviewCanvas" style="max-width: 190px; max-height: 190px; display: block; margin: auto;"></canvas>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                        <button class="btn" id="generateMirageBtn" style="width:100%;">生成幻影图</button>
                        <button class="btn" id="downloadMirageBtn" style="width:100%;" disabled>下载文件</button>
                    </div>

                    <div class="small" style="margin-top:8px">
                        处理日志：
                        <div id="mirage-message" class="log-box" style="display:block; min-height:36px;">&nbsp;</div>
                    </div>
                </div>

                <div class="controls post-card" style="padding:14px;height:fit-content">
                    <h3 class="params-title">参数设置</h3>
                    
                    <div class="compress-param">
                        <label class="small">尺寸标准 (若尺寸不同)</label>
                        <select id="mirageSizeBasis">
                            <option value="white">以白底预览图 (图 A) 为准</option>
                            <option value="black">以黑底隐藏图 (图 B) 为准</option>
                        </select>
                        <label class="small">以选中图片的尺寸作为最终输出的尺寸。</label>
                    </div>

                    <div class="compress-param" style="margin-top: 15px;">
                        <label class="small">另一张图的缩放策略</label>
                        <select id="mirageScaleStrategy">
                            <option value="stretch">拉伸/缩放 (默认)</option>
                            <option value="fit">居中填充 (保持比例)</option>
                        </select>
                        <label class="small">如果尺寸不一致，另一张图如何适应目标尺寸。</label>
                    </div>
                    
                    <div style="margin-top:15px;" class="small">
                        💡 **提示：** 保持两图尺寸一致可以获得最佳效果。
                    </div>
                </div>

            </div>
        </div>
        
    </div>
</div>
<canvas id="mirage-canvas" style="display:none;"></canvas>
    
    <div class="post-card">
        <h2 class="card-title">✨ 未来内容 <span class="toggle-icon">▾</span></h2>
        <div class="card-content"><p>敬请期待！</p></div>
    </div>
</div>

<footer>© 2025 <span>Frey</span> • Powered by GitHub Pages</footer>

<div id="bg-switcher-btn"><span id="bg-icon"></span></div>
<div id="bg-switcher-panel">
    <h3>动态背景模式</h3>
    <div class="bg-options">
        <button data-mode="night" class="bg-opt active">夜间 · NET网格</button>
        <button data-mode="day"   class="bg-opt">日间 · BIRDS飞鸟</button>
        </div>
</div>

<div id="net-monitor-btn"><div class="net-icon">🌐</div></div>
<div id="net-monitor-panel">
    <h3>网络状态监控</h3>
    <div class="net-item">网络状态：<span id="nm-status">--</span></div>
    <div class="net-item">请求耗时：<span id="nm-request">--</span></div>
    <div class="net-item">下载速度：<span id="nm-speed">--</span></div>
    <div class="net-item">网络延迟：<span id="nm-latency">--</span></div>
</div>

<div id="music-player-btn"><div class="music-icon">🎵</div></div>
<div id="music-player-panel">
    <h3 class="panel-title">
        音乐播放器
        <span id="toggleList" style="position:absolute;right:0;top:0;cursor:pointer;font-size:18px;opacity:0.6;">♪</span>
    </h3>
    
    <div id="songTitle" class="net-item" style="font-weight:600;cursor:pointer;margin-bottom:12px;" title="点击展开歌单">加载中...</div>
    
    <div class="player-row">
        <span id="currentTime" class="player-side-item">0:00</span>
        <input type="range" id="progress" value="0" max="100">
        <span id="duration" class="player-side-item">--:--</span>
    </div>

    <div class="controls-row">
        <button id="prevBtn" title="上一首">⏮</button>
        <button id="playBtn" title="播放/暂停">▶</button>
        <button id="nextBtn" title="下一首">⏭</button>
    </div>

    <div class="player-row">
        <span class="player-side-item icon">🔈</span>
        <input type="range" id="volume" min="0" max="100" value="70">
        <span class="player-side-item icon">🔊</span>
    </div>

    <div id="playlistContainer" style="display:none;max-height:180px;overflow-y:auto;margin-top:12px;border-top:1px solid rgba(255,255,255,0.1);padding-top:8px;width:100%;">
        <div style="text-align:center;color:#60a5fa;font-size:12px;padding:4px 0;margin-bottom:8px;border-bottom:1px solid rgba(96,165,250,0.3);font-weight:600;">
            以下所有音乐均由 Frey 使用 AI 生成
        </div>
        <div id="playlistItems" style="font-size:13px;"></div>
        <div style="padding:8px 0;color:#64748b;font-size:12px;text-align:center;">可拖拽本地 mp3 到此处添加</div>
    </div>
</div>

<script src="js/lib/three.min.js"></script>
<script src="js/lib/vanta.net.min.js"></script>
<script src="js/lib/vanta.birds.min.js"></script>
<script src="js/lib/vanta.clouds.min.js"></script>
<script src="js/lib/browser-image-compression.min.js"></script>
<script src="js/lib/jszip.min.js"></script>
<script src="js/lib/jspdf.umd.min.js"></script>
<script src="js/lib/pdf.min.js"></script>

<script>
    window.VANTA = window.VANTA || {};
    Object.assign(window.VANTA, window.VANTA || {});
</script>

<script type="module" src="js/main.js"></script>

<script>
/* 小脚本：Tab 切换（图片/PDF互转）与加密/解密 tab */
document.querySelectorAll('#pdf-convert-card [data-tab]').forEach(b => b.onclick = () => {
    // 仅在当前卡片范围内寻找按钮和面板
    const card = b.closest('.post-card');
    card.querySelectorAll('[data-tab]').forEach(x => x.classList.remove('active'));
    card.querySelectorAll('#img2pdf, #pdf2img').forEach(x => x.style.display = 'none');
    
    b.classList.add('active');
    const targetId = b.dataset.tab;
    document.getElementById(targetId).style.display = targetId === 'img2pdf' ? 'grid' : 'block';
});

// 加密 / 解密 tab 切换（使用 data-enc-tab）
document.querySelectorAll('[data-enc-tab]').forEach(b => b.onclick = () => {
    document.querySelectorAll('[data-enc-tab]').forEach(x => x.classList.remove('active'));
    document.getElementById('encrypt-panel').style.display = 'none';
    document.getElementById('decrypt-panel').style.display = 'none';
    b.classList.add('active');
    document.getElementById(b.dataset.encTab + '-panel').style.display = 'block';
});

// 新增：狗叫密语 Tab 切换（使用 data-dog-tab）
document.querySelectorAll('[data-dog-tab]').forEach(b => b.onclick = () => {
    document.querySelectorAll('[data-dog-tab]').forEach(x => x.classList.remove('active'));
    document.getElementById('dog-encode-panel').style.display = 'none';
    document.getElementById('dog-decode-panel').style.display = 'none';
    b.classList.add('active');
    document.getElementById('dog-' + b.dataset.dogTab + '-panel').style.display = 'grid'; // 注意这里是 grid
});
    
// 自定义尺寸显隐
document.getElementById('pageSize').onchange = e => {
    document.getElementById('customSizeRow').style.display = e.target.value === 'custom' ? 'block' : 'none';
};

</script>
    <canvas id="mirage-canvas" style="display:none;"></canvas>

    <script type="module" src="js/main.js"></script>
</body>
</html>
