<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Frey 的个人网站</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="time-card"><div class="date">0000-00-00</div><div class="time">--:--:--</div></div>

<header><h1>Frey 的个人网站</h1><p>记录 · 思考 · 成长 · 前进</p></header>

<div class="container">

    <!-- 图片压缩&格式转换 -->
    <div class="post-card">
        <h2 class="card-title">图片压缩&格式转换 <span class="toggle-icon">▾</span></h2>
        <div class="card-content">
            <p style="margin-top:8px">在浏览器内压缩图片并转换格式：上传 → 设置参数 → 压缩 → 单张或打包下载。</p>
            <div style="margin-top:12px" class="compress-grid">
                <div style="padding:12px">
                    <div id="dropzone" class="dropzone">
                        <div style="font-weight:600;color:#cfe8ff">拖拽图片到这里，或点击选择文件（支持多选）</div>
                        <div class="small" style="margin-top:6px">支持 JPEG / PNG / WebP / AVIF / GIF（静帧）以及几乎所有浏览器可打开的图片格式</div>
                        <input id="fileInput" type="file" accept="image/*" multiple style="display:none">
                    </div>
                    <div class="thumbs" id="thumbs"></div>
                    <div style="margin-top:12px" class="file-row">
                        <div class="small">已选：<span id="count">0</span> 张</div>
                        <div>
                            <button class="btn" id="clearBtn">清空页面</button>
                            <button class="btn" id="compressBtn">开始处理</button>
                            <button class="btn" id="downloadAllBtn">打包下载</button>
                        </div>
                    </div>
                    <div style="margin-top:8px" class="small">
                        处理日志：<div id="log" style="margin-top:6px;color:#94a3b8;font-size:13px;max-height:160px;overflow:auto;padding:6px;border-radius:6px;background:rgba(0,0,0,0.2)"></div>
                    </div>
                </div>
                <div class="controls post-card" style="padding:14px">
                    <h3 style="margin:0 0 8px;color:#93c5fd">参数设置</h3>

                    <!-- 下面这四行是真正会变灰的压缩参数 -->
                    <div class="compress-param"><label class="small">最大宽度或高度（像素）</label><input id="maxSide" type="number" value="1024" min="64" step="1"></div>
                    <div class="compress-param"><label class="small">目标文件大小（最大，MB）</label><input id="maxSizeMB" type="number" value="1" min="0.05" step="0.05"></div>
                    <div>
                        <label class="small">输出格式</label>
                        <select id="outFormat">
                            <option value="original">保持原格式</option>
                            <option value="jpeg">JPEG (.jpg)</option>
                            <option value="png">PNG (.png)</option>
                            <option value="webp" selected>WebP (.webp)</option>
                            <option value="avif">AVIF (.avif) </option>
                        </select>
                    </div>
                    <div class="compress-param">
                        <label class="small">质量 (0.1 - 1.0) <span id="qualityVal" class="small" style="float:right">0.80</span></label>
                        <input id="quality" type="range" min="0.1" max="1" step="0.05" value="0.80">
                    </div>
                    <div class="compress-param"><label class="small"><input id="useWorker" type="checkbox" checked> 使用 Web Worker（更快，推荐）</label></div>

                    <!-- 这两个永远保持高亮、可交互 -->
                    <div><label class="small"><input type="checkbox" id="onlyConvert"> 仅修改图片格式（不压缩）</label></div>

                    <div style="margin-top:8px" class="small">
                        提示：勾选「仅修改图片格式」后将无损转换格式，压缩相关参数会变灰。<br>AVIF 压缩率最高，WebP 兼容性最佳。
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="post-card">
        <h2 class="card-title">未来内容 <span class="toggle-icon">▾</span></h2>
        <div class="card-content"><p>敬请期待！</p></div>
    </div>

</div>

<footer>© 2025 <span>Frey</span> • Powered by GitHub Pages</footer>

<div id="net-monitor-btn"><div class="net-icon">🌐</div></div>
<div id="net-monitor-panel">
    <h3>网络状态监控</h3>
    <div class="net-item">网络状态：<span id="nm-status">--</span></div>
    <div class="net-item">请求耗时：<span id="nm-request">--</span></div>
    <div class="net-item">下载速度：<span id="nm-speed">--</span></div>
    <div class="net-item">网络延迟：<span id="nm-latency">--</span></div>
</div>

<!-- 第三方库 -->
<script src="js/lib/three.min.js"></script>
<script src="js/lib/vanta.net.min.js"></script>
<script src="js/lib/browser-image-compression.min.js"></script>
<script src="js/lib/jszip.min.js"></script>

<!-- 自己的模块入口 -->
<script type="module" src="js/main.js"></script>
</body>
</html>
